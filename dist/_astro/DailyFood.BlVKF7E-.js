import{r as _e,s as J,a as G,b as ce,c as F,d as me,e as he,f as R,h as E,g as ye,i as ge,j as _,k as Ne,H as Ee,l as K,m as p,n as U,o as be,p as $,q as ee,t as ke,I as P,u as te,v as Ie,w as xe,x as X,E as Se,y as Ae,z as qe,A as Ue,B as Te,C as we,D as Le,F as Me,G as Ce,L as Oe,N as Re,J as pe,K as Pe,M as ae,O as He,P as ne,Q as S,R as Q,S as A,T as b,U as w,V as B,W as L,X as V,Y as re,Z as De,_ as z,$ as Fe,a0 as Be,a1 as Ve}from"./render.DEyZyNFF.js";const Qe="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Qe);const Ye=typeof requestIdleCallback>"u"?e=>setTimeout(e,1):requestIdleCallback;let M=[];function Je(){var e=M;M=[],_e(e)}function Ge(e){M.length===0&&Ye(Je),M.push(e)}let W=!1;function ie(){W||(W=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Ke(e){var t=ce,a=F;J(null),G(null);try{return e()}finally{J(t),G(a)}}function ue(e,t,a,n=a){e.addEventListener(t,()=>Ke(a));const i=e.__on_r;i?e.__on_r=()=>{i(),n(!0)}:e.__on_r=()=>n(!0),ie()}function le(e,t){return t}function Xe(e,t,a,n){for(var i=[],o=t.length,f=0;f<o;f++)Ae(t[f].e,i,!0);var c=o>0&&i.length===0&&a!==null;if(c){var m=a.parentNode;qe(m),m.append(a),n.clear(),I(e,t[0].prev,t[o-1].next)}Ue(i,()=>{for(var h=0;h<o;h++){var l=t[h];c||(n.delete(l.k),I(e,l.prev,l.next)),Te(l.e,!c)}})}function se(e,t,a,n,i,o=null){var f=e,c={flags:t,items:new Map,first:null};{var m=e;f=E?R(ye(m)):m.appendChild(me())}E&&ge();var h=null,l=!1,N=Ne(()=>{var u=a();return Ce(u)?u:u==null?[]:te(u)});he(()=>{var u=_(N),d=u.length;if(l&&d===0)return;l=d===0;let r=!1;if(E){var s=f.data===Ee;s!==(d===0)&&(f=K(),R(f),p(!1),r=!0)}if(E){for(var y=null,v,g=0;g<d;g++){if(U.nodeType===8&&U.data===be){f=U,r=!0,p(!1);break}var q=u[g],x=n(q,g);v=fe(U,c,y,null,q,x,g,i,t,a),c.items.set(x,v),y=v}d>0&&R(K())}E||ze(u,c,f,i,t,n,a),o!==null&&(d===0?h?$(h):h=ee(()=>o(f)):h!==null&&ke(h,()=>{h=null})),r&&p(!0),_(N)}),E&&(f=U)}function ze(e,t,a,n,i,o,f){var c=e.length,m=t.items,h=t.first,l=h,N,u=null,d=[],r=[],s,y,v,g;for(g=0;g<c;g+=1){if(s=e[g],y=o(s,g),v=m.get(y),v===void 0){var q=l?l.e.nodes_start:a;u=fe(q,t,u,u===null?t.first:u.next,s,y,g,n,i,f),m.set(y,u),d=[],r=[],l=u.next;continue}if(We(v,s,g),(v.e.f&P)!==0&&$(v.e),v!==l){if(N!==void 0&&N.has(v)){if(d.length<r.length){var x=r[0],k;u=x.prev;var Y=d[0],C=d[d.length-1];for(k=0;k<d.length;k+=1)Z(d[k],x,a);for(k=0;k<r.length;k+=1)N.delete(r[k]);I(t,Y.prev,C.next),I(t,u,Y),I(t,C,x),l=x,u=C,g-=1,d=[],r=[]}else N.delete(v),Z(v,l,a),I(t,v.prev,v.next),I(t,v,u===null?t.first:u.next),I(t,u,v),u=v;continue}for(d=[],r=[];l!==null&&l.k!==y;)(l.e.f&P)===0&&(N??=new Set).add(l),r.push(l),l=l.next;if(l===null)continue;v=l}d.push(v),u=v,l=v.next}if(l!==null||N!==void 0){for(var O=N===void 0?[]:te(N);l!==null;)(l.e.f&P)===0&&O.push(l),l=l.next;var ve=O.length;if(ve>0){var de=c===0?a:null;Xe(t,O,de,m)}}F.first=t.first&&t.first.e,F.last=u&&u.e}function We(e,t,a,n){Ie(e.v,t),e.i=a}function fe(e,t,a,n,i,o,f,c,m,h){var l=(m&we)!==0,N=(m&Le)===0,u=l?N?xe(i):X(i):i,d=(m&Se)===0?f:X(f),r={i:d,v:u,k:o,a:null,e:null,prev:a,next:n};try{return r.e=ee(()=>c(e,u,d,h),E),r.e.prev=a&&a.e,r.e.next=n&&n.e,a===null?t.first=r:(a.next=r,a.e.next=r.e),n!==null&&(n.prev=r,n.e.prev=r.e),r}finally{}}function Z(e,t,a){for(var n=e.next?e.next.e.nodes_start:a,i=t?t.e.nodes_start:a,o=e.e.nodes_start;o!==n;){var f=Me(o);i.before(o),o=f}}function I(e,t,a){t===null?e.first=a:(t.next=a,t.e.next=a&&a.e),a!==null&&(a.prev=t,a.e.prev=t&&t.e)}const Ze=Symbol("is custom element"),je=Symbol("is html");function $e(e){if(E){var t=!1,a=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var n=e.value;j(e,"value",null),e.value=n}if(e.hasAttribute("checked")){var i=e.checked;j(e,"checked",null),e.checked=i}}};e.__on_r=a,Ge(a),ie()}}function j(e,t,a,n){var i=et(e);E&&(i[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||i[t]!==(i[t]=a)&&(t==="loading"&&(e[Oe]=a),e.removeAttribute(t))}function et(e){return e.__attributes??={[Ze]:e.nodeName.includes("-"),[je]:e.namespaceURI===Re}}function tt(e,t,a=t){ue(e,"input",n=>{var i=n?e.defaultValue:e.value;if(i=H(e)?D(i):i,a(i),i!==(i=t())){var o=e.selectionStart,f=e.selectionEnd;e.value=i??"",f!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(f,e.value.length))}}),(E&&e.defaultValue!==e.value||pe(t)==null&&e.value)&&a(H(e)?D(e.value):e.value),Pe(()=>{var n=t();H(e)&&n===D(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function H(e){var t=e.type;return t==="number"||t==="range"}function D(e){return e===""?null:+e}function oe(e,t,a){if(e.multiple)return rt(e,t);for(var n of e.options){var i=T(n);if(He(i,t)){n.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function at(e,t){ae(()=>{var a=new MutationObserver(()=>{var n=e.__value;oe(e,n)});return a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{a.disconnect()}})}function nt(e,t,a=t){var n=!0;ue(e,"change",i=>{var o=i?"[selected]":":checked",f;if(e.multiple)f=[].map.call(e.querySelectorAll(o),T);else{var c=e.querySelector(o)??e.querySelector("option:not([disabled])");f=c&&T(c)}a(f)}),ae(()=>{var i=t();if(oe(e,i,n),n&&i===void 0){var o=e.querySelector(":checked");o!==null&&(i=T(o),a(i))}e.__value=i,n=!1}),at(e)}function rt(e,t){for(var a of e.options)a.selected=~t.indexOf(T(a))}function T(e){return"__value"in e?e.__value:e.value}var it=Q("<option> </option>"),ut=Q('<li class="svelte-bbh10f"><div> </div> <div><input type="number" min="0" style="width: 40px;"></div> <div><select name="unit"></select></div> <div> </div></li>');function lt(e,t){ne(t,!0);let a=S(()=>t.quantityUnit.protein*t.quantity);var n=ut(),i=A(n),o=A(i,!0);b(i);var f=w(i,2),c=A(f);$e(c),b(f);var m=w(f,2),h=A(m);se(h,21,()=>t.units,le,(u,d)=>{var r=it(),s={},y=A(r,!0);b(r),B(()=>{s!==(s=_(d).unitName)&&(r.value=(r.__value=_(d).unitName)==null?"":_(d).unitName),L(y,_(d).unitName)}),V(u,r)}),b(h),b(m);var l=w(m,2),N=A(l);b(l),b(n),B(u=>{L(o,t.foodName),L(N,`${u??""}g`)},[()=>Math.round(_(a))]),tt(c,()=>t.quantity,u=>t.onQuantityUpdate(u)),nt(h,()=>t.quantityUnit.unitName,u=>t.onUnitUpdate(u)),V(e,n),re()}var st=Q('<ul class="svelte-1knob23"></ul> <p> </p>',1);function ot(e,t){ne(t,!0);let a=De(z(document.getElementById(t.datePickerId).value));Fe(()=>{const r=document.getElementById(t.datePickerId),s=()=>{Ve(a,r.value,!0)};return r.addEventListener("change",s),()=>{r.removeEventListener("change",s)}});let n=z(JSON.parse(localStorage.getItem("dailyFoodAmounts")||"{}")),i=S(()=>n[_(a)]??{});const o=r=>s=>y=>{if(n[r]||(n[r]={}),!n[r][s]){const v=t.foods.find(g=>g.foodName===s).units;n[r][s]={unitName:v[0].unitName,quantity:0}}n[r][s].quantity=y,c()},f=r=>s=>y=>{if(n[r]||(n[r]={}),!n[r][s]){const v=t.foods.find(g=>g.foodName===s).units;n[r][s]={unitName:v[0].unitName,quantity:0}}n[r][s].unitName=y,c()},c=()=>localStorage.setItem("dailyFoodAmounts",JSON.stringify(n));let m=(r,s)=>t.foods.find(y=>y.foodName===r).units.find(y=>y.unitName===s),h=S(()=>Math.round(t.foods.map(r=>m(r.foodName,_(i)[r.foodName]?.unitName??r.units[0].unitName).protein*(_(i)[r.foodName]?.quantity??0)).reduce((r,s)=>r+s,0)));var l=st(),N=Be(l);se(N,21,()=>t.foods,le,(r,s)=>{const y=S(()=>_(i)[_(s).foodName]?.quantity??0),v=S(()=>m(_(s).foodName,_(i)[_(s).foodName]?.unitName??_(s).units[0].unitName)),g=S(()=>o(_(a))(_(s).foodName)),q=S(()=>f(_(a))(_(s).foodName));lt(r,{get foodName(){return _(s).foodName},get units(){return _(s).units},get quantity(){return _(y)},get quantityUnit(){return _(v)},get onQuantityUpdate(){return _(g)},get onUnitUpdate(){return _(q)}})}),b(N);var u=w(N,2),d=A(u);b(u),B(()=>L(d,`total protein: ${_(h)??""}g`)),V(e,l),re()}export{ot as default};
