import{r as _e,s as Y,a as J,b as ce,c as p,d as me,e as he,f as C,h as E,g as ye,i as ge,j as d,k as Ne,H as Ee,l as G,m as O,n as q,o as be,p as $,q as ee,t as ke,I as R,u as te,v as Ie,w as xe,x as K,E as Se,y as Ae,z as qe,A as Ue,B as Te,C as we,D as Le,F as Me,G as Ce,L as Oe,N as Re,J as Pe,K as He,M as ae,O as De,P as ne,Q as A,R as V,S,T as k,U as P,V as X,W as B,X as re,Y as H,Z as Fe,_ as z,$ as pe,a0 as Be}from"./render.D3ky06Ci.js";const Ve="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Ve);const Qe=typeof requestIdleCallback>"u"?e=>setTimeout(e,1):requestIdleCallback;let w=[];function Ye(){var e=w;w=[],_e(e)}function Je(e){w.length===0&&Qe(Ye),w.push(e)}let W=!1;function ie(){W||(W=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Ge(e){var t=ce,a=p;Y(null),J(null);try{return e()}finally{Y(t),J(a)}}function ue(e,t,a,n=a){e.addEventListener(t,()=>Ge(a));const i=e.__on_r;i?e.__on_r=()=>{i(),n(!0)}:e.__on_r=()=>n(!0),ie()}function le(e,t){return t}function Ke(e,t,a,n){for(var i=[],v=t.length,f=0;f<v;f++)Ae(t[f].e,i,!0);var m=v>0&&i.length===0&&a!==null;if(m){var h=a.parentNode;qe(h),h.append(a),n.clear(),I(e,t[0].prev,t[v-1].next)}Ue(i,()=>{for(var _=0;_<v;_++){var r=t[_];m||(n.delete(r.k),I(e,r.prev,r.next)),Te(r.e,!m)}})}function se(e,t,a,n,i,v=null){var f=e,m={flags:t,items:new Map,first:null};{var h=e;f=E?C(ye(h)):h.appendChild(me())}E&&ge();var _=null,r=!1,l=Ne(()=>{var u=a();return Ce(u)?u:u==null?[]:te(u)});he(()=>{var u=d(l),o=u.length;if(r&&o===0)return;r=o===0;let s=!1;if(E){var g=f.data===Ee;g!==(o===0)&&(f=G(),C(f),O(!1),s=!0)}if(E){for(var N=null,c,y=0;y<o;y++){if(q.nodeType===8&&q.data===be){f=q,s=!0,O(!1);break}var T=u[y],x=n(T,y);c=fe(q,m,N,null,T,x,y,i,t,a),m.items.set(x,c),N=c}o>0&&C(G())}E||Xe(u,m,f,i,t,n,a),v!==null&&(o===0?_?$(_):_=ee(()=>v(f)):_!==null&&ke(_,()=>{_=null})),s&&O(!0),d(l)}),E&&(f=q)}function Xe(e,t,a,n,i,v,f){var m=e.length,h=t.items,_=t.first,r=_,l,u=null,o=[],s=[],g,N,c,y;for(y=0;y<m;y+=1){if(g=e[y],N=v(g,y),c=h.get(N),c===void 0){var T=r?r.e.nodes_start:a;u=fe(T,t,u,u===null?t.first:u.next,g,N,y,n,i,f),h.set(N,u),o=[],s=[],r=u.next;continue}if(ze(c,g,y),(c.e.f&R)!==0&&$(c.e),c!==r){if(l!==void 0&&l.has(c)){if(o.length<s.length){var x=s[0],b;u=x.prev;var Q=o[0],L=o[o.length-1];for(b=0;b<o.length;b+=1)Z(o[b],x,a);for(b=0;b<s.length;b+=1)l.delete(s[b]);I(t,Q.prev,L.next),I(t,u,Q),I(t,L,x),r=x,u=L,y-=1,o=[],s=[]}else l.delete(c),Z(c,r,a),I(t,c.prev,c.next),I(t,c,u===null?t.first:u.next),I(t,u,c),u=c;continue}for(o=[],s=[];r!==null&&r.k!==N;)(r.e.f&R)===0&&(l??=new Set).add(r),s.push(r),r=r.next;if(r===null)continue;c=r}o.push(c),u=c,r=c.next}if(r!==null||l!==void 0){for(var M=l===void 0?[]:te(l);r!==null;)(r.e.f&R)===0&&M.push(r),r=r.next;var ve=M.length;if(ve>0){var de=m===0?a:null;Ke(t,M,de,h)}}p.first=t.first&&t.first.e,p.last=u&&u.e}function ze(e,t,a,n){Ie(e.v,t),e.i=a}function fe(e,t,a,n,i,v,f,m,h,_){var r=(h&we)!==0,l=(h&Le)===0,u=r?l?xe(i):K(i):i,o=(h&Se)===0?f:K(f),s={i:o,v:u,k:v,a:null,e:null,prev:a,next:n};try{return s.e=ee(()=>m(e,u,o,_),E),s.e.prev=a&&a.e,s.e.next=n&&n.e,a===null?t.first=s:(a.next=s,a.e.next=s.e),n!==null&&(n.prev=s,n.e.prev=s.e),s}finally{}}function Z(e,t,a){for(var n=e.next?e.next.e.nodes_start:a,i=t?t.e.nodes_start:a,v=e.e.nodes_start;v!==n;){var f=Me(v);i.before(v),v=f}}function I(e,t,a){t===null?e.first=a:(t.next=a,t.e.next=a&&a.e),a!==null&&(a.prev=t,a.e.prev=t&&t.e)}const We=Symbol("is custom element"),Ze=Symbol("is html");function je(e){if(E){var t=!1,a=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var n=e.value;j(e,"value",null),e.value=n}if(e.hasAttribute("checked")){var i=e.checked;j(e,"checked",null),e.checked=i}}};e.__on_r=a,Je(a),ie()}}function j(e,t,a,n){var i=$e(e);E&&(i[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||i[t]!==(i[t]=a)&&(t==="loading"&&(e[Oe]=a),e.removeAttribute(t))}function $e(e){return e.__attributes??={[We]:e.nodeName.includes("-"),[Ze]:e.namespaceURI===Re}}function et(e,t,a=t){ue(e,"input",n=>{var i=n?e.defaultValue:e.value;if(i=D(e)?F(i):i,a(i),i!==(i=t())){var v=e.selectionStart,f=e.selectionEnd;e.value=i??"",f!==null&&(e.selectionStart=v,e.selectionEnd=Math.min(f,e.value.length))}}),(E&&e.defaultValue!==e.value||Pe(t)==null&&e.value)&&a(D(e)?F(e.value):e.value),He(()=>{var n=t();D(e)&&n===F(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function D(e){var t=e.type;return t==="number"||t==="range"}function F(e){return e===""?null:+e}function oe(e,t,a){if(e.multiple)return nt(e,t);for(var n of e.options){var i=U(n);if(De(i,t)){n.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function tt(e,t){ae(()=>{var a=new MutationObserver(()=>{var n=e.__value;oe(e,n)});return a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{a.disconnect()}})}function at(e,t,a=t){var n=!0;ue(e,"change",i=>{var v=i?"[selected]":":checked",f;if(e.multiple)f=[].map.call(e.querySelectorAll(v),U);else{var m=e.querySelector(v)??e.querySelector("option:not([disabled])");f=m&&U(m)}a(f)}),ae(()=>{var i=t();if(oe(e,i,n),n&&i===void 0){var v=e.querySelector(":checked");v!==null&&(i=U(v),a(i))}e.__value=i,n=!1}),tt(e)}function nt(e,t){for(var a of e.options)a.selected=~t.indexOf(U(a))}function U(e){return"__value"in e?e.__value:e.value}var rt=V("<option> </option>"),it=V('<li class="svelte-bbh10f"><div> </div> <div><input type="number" min="0" style="width: 40px;"></div> <div><select name="unit"></select></div> <div> </div></li>');function ut(e,t){ne(t,!0);let a=A(()=>t.quantityUnit.protein*t.quantity);var n=it(),i=S(n),v=S(i,!0);k(i);var f=P(i,2),m=S(f);je(m),k(f);var h=P(f,2),_=S(h);se(_,21,()=>t.units,le,(u,o)=>{var s=rt(),g={},N=S(s,!0);k(s),X(()=>{g!==(g=d(o).unitName)&&(s.value=(s.__value=d(o).unitName)==null?"":d(o).unitName),H(N,d(o).unitName)}),B(u,s)}),k(_),k(h);var r=P(h,2),l=S(r,!0);k(r),k(n),X(u=>{H(v,t.foodName),H(l,u)},[()=>Math.round(d(a))]),et(m,()=>t.quantity,u=>t.onQuantityUpdate(u)),at(_,()=>t.quantityUnit.unitName,u=>t.onUnitUpdate(u)),B(e,n),re()}var lt=V('<ul class="svelte-1knob23"></ul>');function ft(e,t){ne(t,!0);let a=Fe(z(document.getElementById(t.datePickerId).value));pe(()=>{const r=document.getElementById(t.datePickerId),l=()=>{Be(a,r.value,!0)};return r.addEventListener("change",l),()=>{r.removeEventListener("change",l)}});let n=z(JSON.parse(localStorage.getItem("dailyFoodAmounts")||"{}")),i=A(()=>n[d(a)]??{});const v=r=>l=>u=>{if(n[r]||(n[r]={}),!n[r][l]){const o=t.foods.find(s=>s.foodName===l).units;n[r][l]={unitName:o[0].unitName,quantity:0}}n[r][l].quantity=u,m()},f=r=>l=>u=>{if(n[r]||(n[r]={}),!n[r][l]){const o=t.foods.find(s=>s.foodName===l).units;n[r][l]={unitName:o[0].unitName,quantity:0}}n[r][l].unitName=u,m()},m=()=>localStorage.setItem("dailyFoodAmounts",JSON.stringify(n));let h=(r,l)=>t.foods.find(u=>u.foodName===r).units.find(u=>u.unitName===l);var _=lt();se(_,21,()=>t.foods,le,(r,l)=>{const u=A(()=>d(i)[d(l).foodName]?.quantity??0),o=A(()=>h(d(l).foodName,d(i)[d(l).foodName]?.unitName??d(l).units[0].unitName)),s=A(()=>v(d(a))(d(l).foodName)),g=A(()=>f(d(a))(d(l).foodName));ut(r,{get foodName(){return d(l).foodName},get units(){return d(l).units},get quantity(){return d(u)},get quantityUnit(){return d(o)},get onQuantityUpdate(){return d(s)},get onUnitUpdate(){return d(g)}})}),k(_),B(e,_),re()}export{ft as default};
